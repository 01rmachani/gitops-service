# GitOps Service Configuration
# Copy to .env and fill in values. Never commit .env!

# Auth key for external services calling POST /push (generate: openssl rand -hex 32)
API_KEY=your_random_api_key_here

# GitHub Personal Access Token (scopes: repo, workflow)
GH_TOKEN=ghp_your_token_here

# Target GitHub repository
GH_OWNER=your_github_org_or_user
GH_REPO=your_repo_name

# Max concurrent /push requests processed at once (default: 5)
PUSH_QUEUE_CONCURRENCY=5

# Max queued /push requests waiting for a slot â€” returns 503 if exceeded (default: 50)
PUSH_QUEUE_MAX_DEPTH=50

# Server port
PORT=3000

# Host directory mounted into the container at /mnt/incoming (docker-compose only)
# External services must write files here; callers pass dir=/mnt/incoming/<subdir>
# SECURITY: the service rejects any dir that is not inside this path (path traversal protection)
INCOMING_DIR=/tmp/gitops-incoming

# Timeout in milliseconds for GitHub API calls (default: 30000)
GH_API_TIMEOUT_MS=30000

# Timeout in milliseconds for LLM calls in the code-review agent (default: 120000)
LLM_TIMEOUT_MS=120000
